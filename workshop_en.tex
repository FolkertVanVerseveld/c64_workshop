%
% Name: Folkert van Verseveld
% UvAnetID: 11839341
% Contact:
%   @: folkert.van.verseveld@gmail.com
%   @: folkert.vanverseveld@students.uva.nl
%

\documentclass[aspectratio=43]{uva-inf-presentation}
\usepackage{multicol}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{subcaption}

\title{Programming in Restricted Enviroments}
% Easter egg: Commodore Business Machines logo
\course{C=}
\assignment{Just 4 Fun}
\assignmenttype{Hacking}
\authors{Folkert van Verseveld}
\uvanetids{11839341}
% XXX Tutor, mentor and docent are not necessary?
\tutor{Teun Mathijssen}
\mentor{}
\docent{Robert van Wijk}
\group{Assembly A2}

\begin{document}

\begin{titelframe}
\titlepage

\end{titelframe}

\begin{frame}
\frametitle{Table of Contents}
\tableofcontents
\end{frame}


\section{Introduction}
\section{Programming Environment}
\section{BASIC programming}
\section{Music}
\section{Graphics}
\section{Intermezzo's and Exercises}

\section{Conclusions}

%----------------------------------------------

\begin{frame}
\frametitle{Restricted Environments}

\begin{itemize}
\item Very first `computers'
\item Primarily built for Army, Universities or Government
\item Spanning several rooms using enormous amounts of electricity
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Applications of very first `computers'}

\begin{itemize}
\item Calculation tables (sin, cos)
\item Administration (statistics, taxes)
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Calculation tables}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/rekentabellen.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Military Applications}

\begin{itemize}
\item Artillery (trajectory of projectiles)
\item Cryptography (enigma)
\item OXO
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Bombe}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/bombe.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{EDSAC}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/edsac.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{EDSAC Debugging}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/edsac_crts.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{OXO}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/oxo.jpg}
\end{figure}
% http://www.dcs.warwick.ac.uk/~edsac/

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Mainframes}

\begin{itemize}
\item Multi-user environment
\item Batch
\item Reserve computing time
\item Not for practical use
\item Very expensive: \$100,000+ / \$1,000,000+
\item Not user friendly
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Mini-mainframes}

\begin{figure}
\includegraphics[width=0.45\linewidth]{images/pdp8.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Mini-mainframes}

\begin{itemize}
\item Expensive, but less than millions: \$10,000+
\item Acceptable performance
\item `Average' customers
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Moore's law}

\begin{itemize}
\item Calculators are getting faster and cheaper
\item The cheaper, the more applications
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Introduction of the Personal Computer}

\begin{itemize}
\item Mini mainframe
\item `Cheap'
\item `User friendly'
\item Real PCs around 1977-1982
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Personal Computers}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/appleii.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Personal Computers}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/trs80.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Personal Computers}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/pet.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Personal Computers}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/vic20.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Personal Computers}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/ibm5150.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Personal Computers}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/zxspectrum.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Game Consoles}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/vcs.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{First Game Consoles}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/nes.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Applications of PCs}

\begin{itemize}
\item Office related (administration, spreadsheets, \dots)
\item Aimed at broader consumer audience
\item (Games)
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Personal Computers by Comparison}

\begin{tabular}{|l|l|l|l|l|}
\hline Year & Model & Introd. & Converted & Now \\ \hline
1977 & PET & \$795 & \$3150 & \$600-\$800 \\
1980 & VIC-20 & \$299.95 & \$874 & \$30-\$110 \\
1982 & C64 & \$595 & \$1480 & \$10-\$50 \\ \hline
1977 & Apple ][ & \$1296 & \$5130 & \$200-\$750 \\
1981 & IBM PC & \$1565 & \$4130 & \$150-\$1100 \\
1982 & ZX Spec. & \pounds 175 & \pounds 567 & \pounds 80-\pounds 120 \\ \hline
1977 & VCS & \$199 & \$768 & \$40-\$80 \\
1983 & NES & \$179 & \$433 & \$25-\$120 \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{What about Hard Disks?}

\begin{itemize}
\item Don't need them
\item Too expensive (+\$500/+\$2,000)
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Data Storage}

\begin{itemize}
\item Programs in RAM, firmware in ROM
\item Power loss: program gone!
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Tapes!}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/datasette.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Tapes!}

\begin{itemize}
\item Sequential magnetic memory
\item Couple of MBs
\item Single/Double density
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Searching for Program}

\begin{itemize}
\item Clumsy
\item Manually seek forward and rewind tape
\item Analog file table
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Floppies!}

\begin{figure}
\includegraphics[width=0.7\linewidth]{images/c1541.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Floppies!}

\begin{itemize}
\item Real floppy
\item 8 inch, 5.25 inch
\item SD/DD
\item 300-600 RPM (5-10 revs/sec)
\item 0.1MB-2.0MB
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Meet the most Successful PC of all time}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/desk.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{The Only Real One - Breadbin}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/c64.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{The Only Real One - Breadbin}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/breadbin.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{The Only Real One - C64C}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/c64c.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Modern Version (emulator)}

\begin{figure}
\includegraphics[width=0.5\linewidth]{images/boot.png}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Hardware Specifications}

\begin{itemize}
\item Introduced in 1982
\item 64 kilobytes of RAM
\item MOS 6510 clocked at 0.985MHz (PAL)
\item 2 joystick ports
\item Cartridge port (games!), serial I/O, user port
\item 16 colors
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{CPU and Memory by Comparison}

\begin{tabular}{|l|l|l|l|l|}
\hline Model & RAM (bytes) & CPU & MHz \\ \hline
PET & 8192 & MOS 6502 & 1 \\
VIC-20 & 5120 & MOS 6502 & 1.11 \\
C64 & 65536 & MOS 6510 & 0.985 \\ \hline
Apple ][ & 4096 & MOS 6502 & 1 \\
IBM PC & 16384 & i8086 & 4.04 \\
ZX Spectrum & 16384 & Z80 & 3.5 \\ \hline
VCS & 128 & MOS 6507 & 1.19 \\
NES & 2048 & Ricoh 2A03 & 1.6 \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{MOS 6502}

\begin{itemize}
\item Really cheap and successful
\item 6502, 6507, 6510, ricoh 2a03, \dots
\item PET, VIC-20, C64, VCS, NES, \dots
\item Embedded systems
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{MOS 6502}

\begin{figure}
\includegraphics[width=\linewidth]{images/terminator.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{MOS 6502}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/bender.jpeg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{What can you do on a C64?}

\begin{itemize}
\item Administration (spreadsheets, word, \dots)
\item Scanning, printing (with dot matrix printer)
\item Games!
\item Internet (using 50Kbps modem)
\item Hardware upgrades
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{What can you do on a C64?}

\begin{figure}
\includegraphics[width=0.8\linewidth]{images/c64back.png}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{What can you do on a C64?}

\begin{figure}
\includegraphics[width=0.8\linewidth]{images/performance.png}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Why Bother with Vintage PCs?}

\begin{itemize}
\item Great Challenge
\item Simple design, easy to understand
\item Literature
\item Programming Contests (yes, more than 30 years!)
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{C64 is still in use at this garage!!}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/c64c_garage.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Software is still being written!}

\begin{itemize}
\item Magazines, newsletters, blogs, \dots
\item Offence \& Prosonix - Area64
\item Mayday! - Fallen Stars
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Supported Programming Languages}

\begin{itemize}
\item Microsoft BASIC
\item Machine code (assembly)
\item Pascal
\item K\&R C
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{How did we write Programs back then?}

\begin{itemize}
\item No internet (BBS after some time)
\item Literature (magazines, books, \dots)
\item Mouth-to-mouth (meetings, competitions, parties, \dots)
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{What do you get if you bought a C64?}

\begin{itemize}
\item User's Guide approx. 300 pages
\item Programmer's reference guide for BASIS and Assembly
\item Reference to programs, clubs, magazines
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{User's Guide}

\begin{itemize}
\item Connecting peripherals
\item Configurations and Commands
\item BASIC programming (approx. 60 commands)
\item Examples
\item Tips and tricks
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Programmer's Reference Guide}

\begin{itemize}
\item Memory layout
\item Assembly instruction set (151 documented)
\item Graphics modes
\item Sound effects
\item Hardware expansions
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Literature}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/c64schema.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Literature}

\begin{figure}
\includegraphics[width=0.75\linewidth]{images/c64schema2.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}{Programming in BASIC}

\begin{itemize}
\item Easy to learn, easy to understand
\item Already embedded in C64
\item 68 BASIC commands
\item Line numbered source code
\item Numeric variables, strings, arrays
\item Code/Data
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}[fragile]{Simple Program - BASIC}

\begin{lstlisting}
10 PRINT "HALLO VIA"
20 GOTO 10
\end{lstlisting}

\end{frame}

%----------------------------------------------

\begin{frame}[fragile]{Simple Program - BASIC}

\begin{lstlisting}
10 FOR I=0 TO 16
20 PRINT 2^I, I
30 NEXT I
\end{lstlisting}

\end{frame}

%----------------------------------------------

% is the same as
\begin{frame}[fragile]{Simple Program - BASIC}

\begin{lstlisting}
10 FORI=0TO16
20 PRINT2^I,I
30 NEXTI
\end{lstlisting}

\end{frame}

%----------------------------------------------

% as well as
\begin{frame}[fragile]{Simple Program - BASIC}

\begin{lstlisting}
10FORI=0TO16:PRINT2^I,I:NEXTI
\end{lstlisting}

\end{frame}

%----------------------------------------------

\begin{frame}{Intermezzo}

\begin{itemize}
\item Go to https://www.github.com/FolkertVanVerseveld/workshop
\item Download and unpack the release archive
\item Try to solve some exercises
\item Try to create a BASIC program
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}{Assembly}

\begin{itemize}
\item Simple, but steep learning curve
\item 151 official instructions
\item Small examples
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}[fragile]{Simple Program - BASIC}

\begin{lstlisting}
10 POKE 1024,8
20 POKE 1025,5
30 POKE 1026,25
40 END
\end{lstlisting}

\end{frame}

%----------------------------------------------

\begin{frame}[fragile]{Simple Program - assembly}

\begin{lstlisting}
* = $0810
lda #$08
sta 1024
lda #$05
sta 1025
lda #$19
sta 1026
rts
\end{lstlisting}

\end{frame}

%----------------------------------------------

\begin{frame}{Simple Program - assembly}

\begin{tabular}{l|l|l|l}
Addr. & Mach. Code & Dissassembly & Pseudo Code \\
 & & * = \$0810 & \\
0810 & A9 08 & LDA \#\$08 & A = `H' \\
0812 & 8D 00 04 & STA \$400 & mem[1024] = A \\
0815 & A9 05 & LDA \#\$05 & A = `E' \\
0817 & 8D 01 04 & STA \$401 & mem[1025] = A \\
081A & A9 19 & LDA \#\$19 & A = `Y' \\
081C & 8D 02 04 & STA \$402 & mem[1026] = A \\
081F & 60 & RTS & return \\
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}{Instruction Set Comparison}

\begin{tabular}{|l|l|l|l|}
\hline CPU & Regs & Reg Bits & Mul/Div \\ \hline
8086 & 14 & 8/16 & Mul \& Div \\
65XX & 6 & 8 & none \\
Z80 & 14 & 8/16 & Mul \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}{8086 registers}

\begin{tabular}{|l|l|l|}
\hline Name & Size & Purpose \\ \hline
A & 16 & Accumulator \\
B & 16 & Base pointer \\
C & 16 & Loop counter \\
D & 16 & Second accumulator, other stuff \\ 
SI & 16 & Source Index \\
DI & 16 & Destination Index \\
BP & 16 & Base Pointer \\
SP & 16 & Stack Pointer \\
IP & 16 & Instruction Pointer \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}{8086 registers continued}

\begin{tabular}{|l|l|l|}
\hline Name & Size & Purpose \\ \hline
CS & 16 & Code Segment \\
DS & 16 & Data Segment \\
ES & 16 & Extra Segment \\
SS & 16 & Stack Segment \\
FLAGS & 16 & Processor Status Word \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}{Z80 registers}

\begin{tabular}{|l|l|l|}
\hline Name & Size & Purpose \\ \hline
AF(') & 16 & Accumulator and Flags \\
BC(') & 16 & Data/Address register \\
DE(') & 16 & Data/Address register \\
HL(') & 16 & Accumulator/Address register \\
SP & 16 & Stack Pointer \\
PC & 16 & Program Counter \\
IX & 16 & Index/Base register \\
IY & 16 & Index/Base register \\
I & 8 & Interrupt vector \\
R & 8 & DRAM refresh counter \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}{6502 registers}

\begin{tabular}{|l|l|l|}
\hline Name & Size & Purpose \\ \hline
A & 8 & Accumulator \\
X & 8 & Index register \\
Y & 8 & Index register \\
SP & 8 & Stack Pointer \\
PC & 16 & Program Counter \\
FLAGS & 8 & Processor Status Word \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\begin{frame}{6502}

\begin{itemize}
\item Very simple and elegant
\item 256 bytes stack (i.e. 128 call-stack)
\item IRQ, NMI
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}{Commodore 64}

\begin{itemize}
\item 64K of RAM
\item KERNAL, BASIC, CHAR ROM
\item Bankswitching
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}{Commodore 64 - memory map}

\begin{tabular}{|l|l|l|l|}
\hline Start & End & Purpose & Size \\ \hline
FFFF & 0000 & RAM & 65356 \\
FFFF & E000 & KERNAL ROM & 8192 \\
DFFF & D000 & I/O \& CHAR ROM & 4096 \\
CFFF & C000 & RAM & 4096 \\
BFFF & A000 & BASIC/ROM PLUG-IN & 8192 \\
9FFF & 8000 & ROM PLUG-IN & 8192 \\
7FFF & 4000 & RAM & 16384 \\
3FFF & 0000 & RAM & 16384 \\ \hline
\end{tabular}

\end{frame}

%----------------------------------------------

\include{graphics_en}

%----------------------------------------------

\include{music_en}

%----------------------------------------------

\begin{frame}
\frametitle{Programming Contests}

\begin{itemize}
\item X (biggest C64 party in the Netherlands!)
\item Revision (largest demoparty in the world!)
\item Nordlicht
\item Under Construction
\item \dots
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{X}

\begin{figure}
\includegraphics[width=0.8\linewidth]{images/x.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{X}

\begin{itemize}
\item Since 1995
\item Since 2004 once per 2 years
\item Last year approx. 400 visitors
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Revision}

\begin{figure}
\includegraphics[width=0.8\linewidth]{images/rev2017.jpg}
\end{figure}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Revision}

\begin{itemize}
\item Since 2011 (previously known as Breakpoint)
\item Approx. 700 visitors
\item Big companies are looking for jobs at the party!
\item Seminars
\item 30+ competitions (demo, gfx, photography, \dots)
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Exercise}

\begin{itemize}
\item Form groups (maximum of 5)
\item Create a demo!
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{Do you want a C64?}

\begin{itemize}
\item Yes you can!
\item Expensive on ebay etc.
\item Cheap at flea market
\item Keyboard
\item HCC
\end{itemize}

\end{frame}

%----------------------------------------------

\begin{frame}
\frametitle{HCC}

\begin{itemize}
\item Dutch Hobby Computer Club
\item Since 27 april 1977
\item Multiple groups of interest
\item Meeting once every two months in Maarssen (Netherlands)
\item Retro (8/16 bit) computers
\item Ultimate II+
\item Swapping
\end{itemize}

\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{Further Reading/Learning}

\begin{itemize}
\item Demoscene
\item Oldskool computers
\item Programming Contests
\item Cracking 'n Hacking
\end{itemize}

\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{HVSC}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/hvsc.jpg}
\end{figure}

\begin{itemize}
\item 49542 SIDs
\item About 1500 artists
\item About 300MB
\item This means about 6KB per SID!
\item More than 16000 hours of music!
\end{itemize}

\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{Pouet}

\begin{figure}
\includegraphics[width=0.6\linewidth]{images/pouet.jpg}
\end{figure}

\begin{itemize}
\item 92 platforms
\item 36 categories
\item About 70,000 prods!
\end{itemize}

\end{frame}

%------------------------------------------------

\begin{frame}
\frametitle{Conclusions}

\begin{itemize}
\item PC History
\item Hacking on C64
\item Programming to the Limit
\item Programming Contests
\end{itemize}

\end{frame}

%------------------------------------------------

\include{thanks_en}

%------------------------------------------------

\begin{frame}
\frametitle{Thank you for your attention}
\Large{\centerline{Are there any questions?}}
\end{frame}

\end{document}
